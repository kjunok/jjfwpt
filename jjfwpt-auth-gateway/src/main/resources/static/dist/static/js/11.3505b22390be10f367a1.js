webpackJsonp([11],{Tcx2:function(e,t){},jCuf:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("qNfb"),a={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Drawer",{attrs:{draggable:"",closable:!1,width:"1000","mask-closable":!1},on:{"on-visible-change":e.visibleChange},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[r("div",{staticClass:"ivu-drawer-header"},[r("Icon",{staticClass:"drawer-close-icon",attrs:{size:"20",type:"md-close"},on:{click:function(t){return e.close()}}}),e._v(" "),r("div",{staticClass:"ivu-drawer-header-inner"},[e._v("角色用户")])],1),e._v(" "),r("Tabs",{attrs:{value:"name1"}},[r("TabPane",{attrs:{label:"角色用户",name:"name1"}},[r("Table",{attrs:{width:"100%",height:e.clientHeight+140,columns:e.userInfoGrid.columns,data:e.userInfoGrid.roleUser},scopedSlots:e._u([{key:"action",fn:function(t){var o=t.row;return t.index,[r("div",{},[r("Icon",{staticStyle:{color:"red"},attrs:{size:"25",type:"ios-trash"},on:{click:function(t){return e.delRoleUser(o.id)}}})],1)]}},{key:"avatar",fn:function(t){var o=t.row;return t.index,[r("div",{},[0==o.avatar.indexOf("http")?r("img",{staticStyle:{"border-radius":"15px"},attrs:{src:o.avatar,width:"30",height:"30"}}):e._e(),e._v(" "),o.avatar?e._e():r("Icon",{attrs:{type:"ios-flower",size:"35"}})],1)]}}])}),e._v(" "),r("Page",{staticStyle:{"margin-top":"10px",float:"right"},attrs:{size:"small","show-total":"","show-elevator":"",total:e.userInfoGrid.roleUserPageData.total,current:e.userInfoGrid.roleUserPageData.current,"page-size":e.userInfoGrid.roleUserPageData.size}})],1),e._v(" "),r("TabPane",{attrs:{label:"添加",name:"name2"}},[r("Table",{attrs:{width:"100%",height:e.clientHeight+140,columns:e.userInfoGrid.columns,data:e.userInfoGrid.notRoleUser},scopedSlots:e._u([{key:"action",fn:function(t){var o=t.row;return t.index,[r("div",[r("Icon",{staticStyle:{color:"#3862f5"},attrs:{size:"25",type:"md-add-circle"},on:{click:function(t){return e.addRoleUser(o.id)}}})],1)]}},{key:"avatar",fn:function(t){var o=t.row;return t.index,[r("div",{},[0==o.avatar.indexOf("http")?r("img",{staticStyle:{"border-radius":"15px"},attrs:{src:o.avatar,width:"30",height:"30"}}):e._e(),e._v(" "),o.avatar?e._e():r("Icon",{attrs:{type:"ios-flower",size:"35"}})],1)]}}])}),e._v(" "),r("Page",{staticStyle:{"margin-top":"10px",float:"right"},attrs:{size:"small","show-total":"","show-elevator":"",total:e.userInfoGrid.notRoleUserPageData.total,current:e.userInfoGrid.notRoleUserPageData.current,"page-size":e.userInfoGrid.notRoleUserPageData.size}})],1)],1)],1)},staticRenderFns:[]},i={components:{RoleAddUser:r("VU/8")({props:["clientHeight","role","show"],name:"RoleAddUser",data:function(){return{userInfoGrid:{columns:[{type:"selection",width:35,align:"center",fixed:"left"},{title:"操作",slot:"action",width:80,align:"center",fixed:"left"},{title:"用户名",key:"username",width:150,fixed:"left"},{title:"昵称",key:"nickName",width:150},{title:"姓名",key:"name",width:150},{title:"图像",slot:"avatar",width:100},{title:"生日",key:"birthday",width:150},{title:"性别",key:"sex",width:100},{title:"邮箱",key:"email",width:200},{title:"手机号",key:"phone",width:150},{title:"状态",key:"status",width:100},{title:"创建人",key:"createUserId",width:200},{title:"创建时间",key:"createTime",width:200},{title:"修改人",key:"updateUserId",width:200},{title:"修改时间",key:"updateTime",width:200}],roleUser:[],notRoleUser:[],roleUserPageData:{total:100,current:1,size:10},notRoleUserPageData:{total:100,current:1,size:10}}}},methods:{addRoleUser:function(e){var t=this;t.$util.req("/api/security/role/addRoleUserList").setJsonDataStr({id:t.role.id,userIds:[e]}).setSuccessfn(function(e){1e3===e.code&&(t.$Notice.success({title:"操作成功",desc:"角色用户添加成功!"}),t.searchNotRoleUserList(),t.searchRoleUserList())}).setErrorfn(function(e){}).go(t)},delRoleUser:function(e){var t=this;t.$util.req("/api/security/role/delRoleUserList").setJsonDataStr({id:t.role.id,userIds:[e]}).setSuccessfn(function(e){1e3===e.code&&(t.$Notice.success({title:"操作成功",desc:"角色用户删除成功!"}),t.searchNotRoleUserList(),t.searchRoleUserList())}).setErrorfn(function(e){}).go(t)},searchRoleUserList:function(){var e=this;e.$util.req("/api/security/user/searchRoleUserList").setJsonDataStr({roleId:e.role.id,start:e.userInfoGrid.roleUserPageData.current,size:e.userInfoGrid.roleUserPageData.size}).setSuccessfn(function(t){1e3===t.code&&(e.userInfoGrid.roleUser=t.data.records,e.userInfoGrid.roleUserPageData.current=t.data.current,e.userInfoGrid.roleUserPageData.total=t.data.total)}).setErrorfn(function(e){}).go(e)},searchNotRoleUserList:function(){var e=this;e.$util.req("/api/security/user/searchNotRoleUserList").setJsonDataStr({roleId:e.role.id,start:e.userInfoGrid.notRoleUserPageData.current,size:e.userInfoGrid.notRoleUserPageData.size}).setSuccessfn(function(t){1e3===t.code&&(e.userInfoGrid.notRoleUser=t.data.records,e.userInfoGrid.notRoleUserPageData.current=t.data.current,e.userInfoGrid.notRoleUserPageData.total=t.data.total)}).setErrorfn(function(e){}).go(e)},close:function(){this.$emit("roleAddUserListen",function(e){e.roleInfoForm.roleAddUser=!1})},visibleChange:function(e){e&&(this.searchRoleUserList(),this.searchNotRoleUserList())}}},a,!1,null,null,null).exports,IconSelect:o.a},props:["clientHeight"],data:function(){return{menuTreeData:[],styles:{height:"calc(100% - 55px)",overflow:"auto",paddingBottom:"53px",position:"static"},roleInfoGrid:{keyword:"",columns:[{type:"selection",width:60,align:"center",fixed:"left"},{title:"操作",slot:"action",width:150,fixed:"left"},{title:"名称",key:"name"},{title:"代码",key:"code"},{title:"图标",key:"icon"},{title:"创建人",key:"createUserIdText"},{title:"创建时间",key:"createTime"},{title:"修改人",key:"updateUserIdText"},{title:"修改时间",key:"updateTime"}],data:[],pageData:{total:100,current:1,size:10}},roleInfoForm:{title:"添加",iconSelect:!1,roleMenuRelation:[],roleAddUser:null,selectRole:{},showField:{id:!1,name:!1,code:!1,createUserId:!1,createTime:!1,updateUserId:!1,updateTime:!1,icon:!1},select:{pid:[]},clearData:{id:"",name:"",code:"",createUserId:"",createTime:"",updateUserId:"",updateTime:"",icon:""},data:{id:"",name:"",code:"",createUserId:"",createTime:"",updateUserId:"",updateTime:"",icon:""},validate:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],code:[{required:!0,message:"请输入代码",trigger:"blur"}],icon:[{required:!0,message:"请输入图标",trigger:"blur"}]},show:!1,roleView:{data:{},show:!1}}}},methods:{openRoleUserWin:function(e){this.roleInfoForm.roleAddUser=!0,this.roleInfoForm.selectRole=e},searchMenuTree:function(e){var t=this;t.$util.req("/api/menuService/findAllMenuTreeView").setSuccessfn(function(r){1e3===r.code&&(t.menuTreeData=[],t.menuTreeData=t.treeMenuAddRender(r.data,e,!0))}).setErrorfn(function(e){}).go(t)},treeMenuAddRender:function(e,t,r){for(var o in e)t.indexOf(e[o].id)>-1&&(e[o].mark=!0,e[o].checked=!0),e[o].expand=r,e[o].render=this.treeIcon,e[o].children.length>0&&this.treeMenuAddRender(e[o].children,t);return e},treeIcon:function(e,t){t.root,t.node;var r=t.data,o="";return r.mark&&(o="................[选中️]"),e("span",{style:{display:"inline-block",width:"100%",color:"2"==r.type?"#2d8cf0":"3"==r.type?"green":"yellow"}},[e("span",[e("Icon",{props:{type:r.icon,size:30},style:{marginRight:"8px"}}),e("span",r.name+o)])])},showRoleView:function(e){this.roleInfoForm.roleView.show=!0,this.roleInfoForm.roleView.data=this.roleInfoGrid.data[e],this.loadMenuTree(this.roleInfoGrid.data[e].id)},removeRole:function(e){var t=this;t.$Modal.confirm({title:"警告",content:"确定要删除吗？",onOk:function(){t.$util.req("/api/roleService/delRole").setJsonDataStr({ids:e}).setSuccessfn(function(e){e.success?(t.$Notice.success({title:"操作成功",desc:"Role删除成功"}),t.searchRoleList()):t.$Notice.error({title:"操作失败",desc:"${cfg.UpModuleName}删除失败"})}).go(t)}})},changeType:function(e,t){t=t||function(){},"1"==e?(this.roleInfoForm.showField.pid=!1,this.roleInfoForm.showField.viewPath=!1,this.roleInfoForm.showField.groupName=!1,this.roleInfoForm.data.pid="0",t()):"2"!=e&&"3"!=e||("2"==e&&(this.roleInfoForm.showField.groupName=!0),"3"==e&&(this.roleInfoForm.showField.groupName=!1),this.roleInfoForm.showField.pid=!0,this.roleInfoForm.showField.viewPath=!0)},listener:function(e){e(this)},saveOrUpdateroleInfoForm:function(e,t){"add"===e?(this.roleInfoForm.title="添加",this.roleInfoForm.data=this.roleInfoForm.clearData,this.searchMenuTree([])):"update"===e&&(this.roleInfoForm.title="修改",this.loadMenuTree(t.id)),this.roleInfoForm.show=!0},loadMenuTree:function(e){var t=this;t.$util.req("/api/roleService/searchRoleById").setJsonDataStr({id:e}).setSuccessfn(function(e){if(e.success){var r=e.data;t.roleInfoForm.data=r,t.roleMenuRelation=e.data.menuIds,t.searchMenuTree(e.data.menuIds)}}).go(t)},saveOrUpdateRole:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var r=t,o=r.$refs.roleMenuTree.getCheckedAndIndeterminateNodes(),a=r.$refs.roleMenuTree.getCheckedNodes(),i=[],s=[];for(var n in a)s.push(a[n].id);for(var l in o)i.push(o[l].id),i.push(o[l].type),s.indexOf(o[l].id)>-1?i.push("1"):i.push("0");r.roleInfoForm.data.menuIds=i,r.$util.req("/api/roleService/saveOrUpdateRole").setJsonDataStr(r.roleInfoForm.data).setSuccessfn(function(e){1e3===e.code&&(r.$Notice.success({title:"操作成功",desc:"role"+r.roleInfoForm.title+"成功"}),r.searchRoleList(),r.roleInfoForm.show=!1)}).setErrorfn(function(e){}).go(t)}})},searchRoleList:function(){var e=this;e.$util.req("/api/roleService/searchRoleList").setJsonDataStr({start:e.roleInfoGrid.pageData.current,size:e.roleInfoGrid.pageData.size,keyword:e.roleInfoGrid.keyword}).setSuccessfn(function(t){t.success&&(e.roleInfoGrid.data=t.data.records,e.roleInfoGrid.pageData.current=t.data.current,e.roleInfoGrid.pageData.total=t.data.total)}).setErrorfn(function(e){}).go(e)},changePageNum:function(e){this.roleInfoGrid.pageData.current=e,this.searchRoleList()},changePageSize:function(e){this.roleInfoGrid.pageData.size=e,this.searchRoleList()}},mounted:function(){this.searchRoleList()}},s={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{background:"rgba(0, 0, 0, 0.36)"}},[r("Card",{staticStyle:{width:"100%",background:"rgba(0, 0, 0, 0.36)",border:"none","border-bottom":"white 1px solid"}},[r("Icon",{attrs:{type:"ios-bulb"}}),e._v("\n    说明\n    "),r("span",{staticStyle:{color:"#ffabfa"}},[e._v("角色管理")])],1),e._v(" "),r("Tabs",{staticStyle:{color:"white","font-weight":"bold"}},[r("TabPane",{attrs:{label:"角色列表",icon:"logo-apple"}},[r("Card",{staticStyle:{width:"100%",padding:"0px",background:"rgba(0, 0, 0, 0.36)","margin-top":"-15px"},attrs:{bordered:!1}},[r("div",{staticStyle:{margin:"-5px 10px 10px 0px"}},[r("Button",{staticStyle:{float:"right"},attrs:{icon:"md-add",type:"default",size:"small",shape:"circle",ghost:""},on:{click:function(t){return e.saveOrUpdateroleInfoForm("add",{type:"1"})}}},[e._v("增加\n          ")]),e._v(" "),r("Input",{staticStyle:{width:"500px"},attrs:{placeholder:"搜索关键字"},model:{value:e.roleInfoGrid.keyword,callback:function(t){e.$set(e.roleInfoGrid,"keyword",t)},expression:"roleInfoGrid.keyword"}},[r("Button",{attrs:{slot:"append",icon:"ios-search"},on:{click:e.searchRoleList},slot:"append"})],1)],1)]),e._v(" "),r("Table",{ref:"table",staticStyle:{background:"rgba(0, 0, 0, 0.36)"},attrs:{height:e.clientHeight,columns:e.roleInfoGrid.columns,data:e.roleInfoGrid.data,showStripe:""},scopedSlots:e._u([{key:"name",fn:function(t){var o=t.row;return[r("Row",[2==o.type?r("Col",{attrs:{span:"4"}},[e._v(" ")]):e._e(),e._v(" "),3==o.type?r("Col",{attrs:{span:"8"}},[e._v(" ")]):e._e(),e._v(" "),r("Col",{attrs:{span:16}},[r("div",{staticStyle:{color:"rgba(13,30,13,0.58)","border-radius":"20px"},style:{color:2==o.type?"#2d8cf0":3==o.type?"green":"yellow"}},[r("Icon",{attrs:{size:"30",type:o.icon}}),e._v("  \n                "),r("strong",[e._v(e._s(o.name))]),e._v("  \n              ")],1)])],1)]}},{key:"action",fn:function(t){var o=t.row,a=t.index;return[r("div",{staticStyle:{"text-align":"right"}},[r("Icon",{staticStyle:{color:"lightblue"},attrs:{size:"25",type:"md-eye"},on:{click:function(t){return e.showRoleView(a)}}}),e._v(" "),r("Icon",{staticStyle:{color:"yellow"},attrs:{size:"25",type:"ios-people"},on:{click:function(t){return e.openRoleUserWin(o)}}}),e._v(" "),r("Icon",{staticStyle:{color:"green"},attrs:{size:"25",type:"ios-create"},on:{click:function(t){return e.saveOrUpdateroleInfoForm("update",{type:o.type,id:o.id})}}}),e._v(" "),r("Icon",{staticStyle:{color:"red"},attrs:{size:"25",type:"ios-trash"},on:{click:function(t){return e.removeRole(o.id)}}})],1)]}}])}),e._v(" "),r("div",{staticStyle:{margin:"10px"}},[r("div",{staticStyle:{float:"right"}},[r("Page",{staticStyle:{height:"40px"},attrs:{"show-total":"","show-elevator":"","show-sizer":"",total:e.roleInfoGrid.pageData.total,current:e.roleInfoGrid.pageData.current,"page-size":e.roleInfoGrid.pageData.size},on:{"on-change":e.changePageNum,"on-page-size-change":e.changePageSize}})],1)])],1),e._v(" "),r("TabPane",{attrs:{label:"Windows",icon:"logo-windows"}}),e._v(" "),r("TabPane",{attrs:{label:"Linux",icon:"logo-tux"}},[e._v("标签三的内容")])],1),e._v(" "),r("Drawer",{attrs:{draggable:"",closable:!1,"mask-closable":!1,width:"1000"},model:{value:e.roleInfoForm.show,callback:function(t){e.$set(e.roleInfoForm,"show",t)},expression:"roleInfoForm.show"}},[r("div",{staticClass:"ivu-drawer-header"},[r("Icon",{staticClass:"drawer-close-icon",attrs:{size:"20",type:"md-close"},on:{click:function(t){e.roleInfoForm.show=!1}}}),e._v(" "),r("div",{staticClass:"ivu-drawer-header-inner"},[e._v(e._s(e.roleInfoForm.title))]),e._v(" "),r("div",{staticStyle:{position:"absolute",right:"20px",top:"10px"}},[r("Button",{attrs:{type:"primary"},on:{click:function(t){return e.saveOrUpdateRole("roleInfoForm")}}},[e._v("提交")])],1)],1),e._v(" "),r("Tabs",{attrs:{value:"name1"}},[r("TabPane",{attrs:{label:"基本信息",name:"name1"}},[r("Card",{style:{height:e.clientHeight+160+"px"},attrs:{bordered:!1}},[r("Form",{ref:"roleInfoForm",attrs:{model:e.roleInfoForm.data,rules:e.roleInfoForm.validate,"label-width":80}},[r("FormItem",{attrs:{label:"名称","label-position":"left",prop:"name"}},[r("Input",{attrs:{placeholder:""},model:{value:e.roleInfoForm.data.name,callback:function(t){e.$set(e.roleInfoForm.data,"name",t)},expression:"roleInfoForm.data.name"}})],1),e._v(" "),r("FormItem",{attrs:{label:"代码","label-position":"left",prop:"code"}},[r("Input",{attrs:{placeholder:""},model:{value:e.roleInfoForm.data.code,callback:function(t){e.$set(e.roleInfoForm.data,"code",t)},expression:"roleInfoForm.data.code"}})],1),e._v(" "),r("FormItem",{attrs:{label:"图标","label-position":"left",prop:"icon"}},[r("Input",{attrs:{placeholder:""},model:{value:e.roleInfoForm.data.icon,callback:function(t){e.$set(e.roleInfoForm.data,"icon",t)},expression:"roleInfoForm.data.icon"}})],1)],1)],1)],1),e._v(" "),r("TabPane",{attrs:{label:"角色菜单",name:"name2"}},[r("Card",{style:{height:e.clientHeight+160+"px"},attrs:{bordered:!1}},[r("Tree",{ref:"roleMenuTree",staticStyle:{"margin-top":"0px"},attrs:{"show-checkbox":"",data:e.menuTreeData}})],1)],1)],1)],1),e._v(" "),r("Drawer",{attrs:{draggable:"",closable:!1,"mask-closable":!1,width:"1000"},model:{value:e.roleInfoForm.roleView.show,callback:function(t){e.$set(e.roleInfoForm.roleView,"show",t)},expression:"roleInfoForm.roleView.show"}},[r("div",{staticClass:"ivu-drawer-header"},[r("Icon",{staticClass:"drawer-close-icon",attrs:{size:"20",type:"md-close"},on:{click:function(t){e.roleInfoForm.roleView.show=!1}}}),e._v(" "),r("div",{staticClass:"ivu-drawer-header-inner"},[e._v("详情")])],1),e._v(" "),r("Tabs",{attrs:{value:"name1"}},[r("TabPane",{attrs:{label:"基本信息",name:"name1"}},[r("Card",{style:{height:e.clientHeight+160+"px"},attrs:{bordered:!1}},e._l(e.roleInfoGrid.columns,function(t,o){return t.key?r("Row",{key:o,staticStyle:{height:"40px","margin-top":"5px",background:"rgba(4,9,7,0.2)","line-height":"35px","border-radius":"6px"},attrs:{type:"flex"}},[r("Col",{attrs:{span:"4"}},[r("div",{staticStyle:{color:"rgb(167,225,230)",padding:"5px","text-align":"center","font-weight":"bold"}},[e._v("\n              "+e._s(t.title)+"\n            ")])]),e._v(" "),r("Col",{attrs:{span:"20"}},[r("div",{staticStyle:{color:"rgba(159,216,209,0.65)",padding:"5px"}},["icon"==t.key?r("div",[r("Icon",{attrs:{size:"30",type:e.roleInfoForm.roleView.data[t.key||t.slot]}})],1):r("div",[e.roleInfoForm.roleView.data[t.key||t.slot]?r("span",{staticStyle:{color:"yellow"}},[e._v("\n                    "+e._s(e.roleInfoForm.roleView.data[t.key||t.slot])+"\n                  ")]):r("span")])])])],1):e._e()}),1)],1),e._v(" "),r("TabPane",{attrs:{label:"角色菜单",name:"name2"}},[r("Card",{style:{height:e.clientHeight+160+"px"},attrs:{bordered:!1}},[r("Tree",{ref:"roleMenuTree",staticStyle:{"margin-top":"0px"},attrs:{data:e.menuTreeData}})],1)],1),e._v(" "),r("TabPane",{attrs:{label:"角色用户",name:"name3"}},[r("Card",{style:{height:e.clientHeight+160+"px"},attrs:{bordered:!1}},[r("div",{staticClass:"demo-avatar"},[r("Avatar",{attrs:{icon:"ios-person"}}),e._v(" "),r("Avatar",[e._v("U")]),e._v(" "),r("Avatar",[e._v("USER")]),e._v(" "),r("Avatar",{attrs:{src:"https://i.loli.net/2017/08/21/599a521472424.jpg"}}),e._v(" "),r("Avatar",{staticStyle:{color:"#f56a00","background-color":"#fde3cf"}},[e._v("U")]),e._v(" "),r("Avatar",{staticStyle:{"background-color":"#87d068"},attrs:{icon:"ios-person"}})],1)])],1)],1)],1),e._v(" "),r("RoleAddUser",{attrs:{role:e.roleInfoForm.selectRole,clientHeight:e.clientHeight,show:e.roleInfoForm.roleAddUser},on:{roleAddUserListen:e.listener}})],1)},staticRenderFns:[]};var n=r("VU/8")(i,s,!1,function(e){r("Tcx2")},null,null);t.default=n.exports}});
//# sourceMappingURL=11.3505b22390be10f367a1.js.map